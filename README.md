# Криптографический калькулятор

Это мощный калькулятор, созданный с использованием Python и библиотеки PyQt6. Он предназначен для выполнения как стандартных арифметических операций, так и сложных криптографических вычислений. Приложение обладает интуитивно понятным графическим интерфейсом и идеально подходит для студентов, изучающих криптографию, а также для всех, кто интересуется математикой.

## Основные возможности

Проект предлагает широкий спектр функций, разделённых по вкладкам для удобства использования:

- **Базовые арифметические операции**:
  - Сложение, вычитание, умножение и деление.
  - Поддержка работы с числами в различных системах счисления (от двоичной до 36-ричной). Это позволяет легко конвертировать и вычислять значения в разных форматах.

- **Длинная арифметика**:
  - Все операции поддерживают работу с очень большими числами, которые превышают стандартные типы данных. Это критически важно для криптографических алгоритмов.

- **Продвинутые математические функции**:
  - **Извлечение квадратного корня**: Вычисление целочисленного квадратного корня из больших чисел.
  - **Модульная арифметика**: Операции (сложение, вычитание, умножение) в кольце вычетов по модулю.
  - **Быстрое возведение в степень по модулю**: Эффективный алгоритм для вычисления `(a^b) mod m`, который является основой многих криптосистем.
  - **Китайская теорема об остатках (КТО)**: Решение систем линейных сравнений, что часто применяется в криптографии и теории чисел.

- **Функции для криптографии**:
  - **Тестирование на простоту**: Включает тесты для определения, является ли число простым (например, тест Миллера-Рабина).

## Требования

Для работы приложения вам понадобится:
- **Python 3.x**
- Зависимости, перечисленные в `requirements.txt`:
  - `PyQt6==6.6.1`
  - `PyQt6-Qt6==6.6.1`
  - `PyQt6-sip==13.6.0`

## Установка и запуск

Чтобы начать работу с калькулятором, следуйте этим шагам. Инструкции написаны для новичков.

**1. Клонирование репозитория**

Сначала нужно скопировать проект на ваш компьютер. Для этого используется система контроля версий Git. Если у вас нет Git, вы можете скачать его [здесь](https://git-scm.com/downloads).

Откройте терминал (командную строку) и выполните команду:
```bash
git clone [URL-вашего-репозитория]
cd MSKZ_FULL
```
Эта команда создаст папку `MSKZ_FULL` и загрузит в неё все файлы проекта.

**2. Создание виртуального окружения**

Виртуальное окружение — это изолированная среда, которая позволяет устанавливать зависимости для конкретного проекта, не затрагивая системные библиотеки. Это лучшая практика при работе с Python.

Выполните в терминале:
```bash
python -m venv venv
```
Эта команда создаст папку `venv` внутри вашего проекта.

**3. Активация виртуального окружения**

Теперь его нужно активировать. Команда зависит от вашей операционной системы:

- **Windows:**
  ```powershell
  .\venv\Scripts\Activate.ps1
  ```
  *Если вы используете `cmd.exe`, команда будет `venv\Scripts\activate`*

- **macOS / Linux:**
  ```bash
  source venv/bin/activate
  ```
После активации вы увидите `(venv)` в начале строки вашего терминала.

**4. Установка зависимостей**

Теперь, когда окружение активно, установите все необходимые библиотеки одной командой:
```bash
pip install -r requirements.txt
```
`pip` — это менеджер пакетов Python. Он прочитает файл `requirements.txt` и установит указанные в нём библиотеки.

**5. Запуск приложения**

Всё готово! Чтобы запустить калькулятор, выполните:
```bash
python src/main.py
```
Откроется главное окно приложения.

## Структура проекта

Проект имеет следующую структуру, чтобы отделить логику от представления:

```
MSKZ_FULL/
├── src/
│   ├── core/                 # Ядро с математической логикой
│   │   ├── long_arithmetic.py    # Реализация операций с длинными числами
│   │   ├── modular_arithmetic.py # Функции модульной арифметики и КТО
│   │   └── primality.py          # Алгоритмы для проверки на простоту
│   │
│   ├── presentation/         # Пользовательский интерфейс (UI)
│   │   └── main_window.py      # Главное окно и все его компоненты
│   │
│   ├── utils/                # Вспомогательные утилиты (пока пуст)
│   └── main.py               # Точка входа в приложение (запускает UI)
│
├── tests/                    # Автоматические тесты
│   ├── test_long_arithmetic.py
│   ├── test_modular_arithmetic.py
│   └── test_primality.py
│
├── .gitignore                # Файл для исключения мусорных файлов из Git
├── requirements.txt          # Список зависимостей проекта
└── README.md                 # Этот файл
```

## Как это работает: Длинная арифметика и класс `LargeNumber`

Основой калькулятора является файл `src/core/long_arithmetic.py`, который позволяет работать с числами практически неограниченного размера и в разных системах счисления. Это достигается за счёт собственного класса `LargeNumber`, а не стандартных типов Python.

### Класс `LargeNumber`

Это "сердце" всей системы. Он хранит большое число не как единое целое, а в специальном формате, удобном для математических операций.

#### Внутреннее представление

-   `self.digits`: Число разбивается на отдельные цифры, и они хранятся в виде списка (например, `[3, 2, 1]` для числа "123"). **Важный нюанс**: цифры хранятся в **обратном порядке**. Это сделано для удобства вычислений "в столбик", так как операции (сложение, умножение) начинаются с младших разрядов (справа), что соответствует обработке списка с нулевого индекса.
-   `self.is_negative`: Знак числа (`True` или `False`) хранится в отдельном поле. Это позволяет отделить логику работы со знаками от самих арифметических вычислений, которые проводятся над абсолютными значениями.

```python
# Примерная структура класса в src/core/long_arithmetic.py
class LargeNumber:
    def __init__(self, value_str: str = "0", base: int = 10):
        # ...
        self.is_negative = False
        self.digits = [] # Здесь будут цифры в обратном порядке
        # ...

    def to_string(self, base: int = 10) -> str:
        # ...
```

#### Как происходит работа?

1.  **`__init__(...)` (Конструктор)**: Когда вы создаёте объект, например, `LargeNumber("1F", 16)`, конструктор "парсит" (анализирует) входную строку:
    -   Определяет знак.
    -   Переворачивает строку (`"F1"`).
    -   Каждый символ (`'F'`, `'1'`) превращает в его числовое значение (`15`, `1`), используя вспомогательные функции.
    -   Записывает результат в `self.digits` в виде списка: `[15, 1]`.

2.  **`to_string(...)`**: Выполняет обратную операцию для вывода результата пользователю:
    -   Берёт список, например, `[15, 1]`.
    -   Каждое число превращает в символ (`'F'`, `'1'`).
    -   Переворачивает последовательность символов (`'1'`, `'F'`) и объединяет в строку: `"1F"`.

### Основные арифметические алгоритмы

Функции в `long_arithmetic.py` имитируют ручные вычисления:

-   **Сложение и вычитание (`add`, `subtract`)**: Алгоритмы похожи на сложение/вычитание "в столбик". Они анализируют знаки чисел, чтобы определить, складывать или вычитать их абсолютные значения.
-   **Умножение (`multiply`)**: Реализует классическое умножение "в столбик". Код вложенными циклами проходит по цифрам каждого числа и суммирует их произведения в правильные разряды.
-   **Деление (`divide`)**: Наиболее сложный алгоритм, который имитирует деление "уголком". Для эффективного подбора очередной цифры частного используется **двоичный поиск**, что значительно ускоряет процесс по сравнению с простым перебором.
-   **Другие функции (`power_integer`, `gcd`, `extended_gcd`)**: Построены на базе уже реализованных четырёх основных операций для выполнения более сложных математических задач.

## Как пользоваться калькулятором

Интерфейс разделён на вкладки, каждая из которых предназначена для определённой операции.

- **Вкладка "Базовые операции"**:
  - Введите числа `A` и `B`.
  - Выберите систему счисления (от 2 до 36).
  - Нажмите на кнопку с нужной операцией (+, -, *, /).
  - Результат появится в поле "Результат".

- **Другие вкладки (Модульная арифметика, КТО и т.д.)**:
  - Заполните все необходимые поля, такие как `число`, `степень`, `модуль`.
  - Нажмите кнопку "Вычислить".
  - Результат будет отображён в соответствующем поле.

## Запуск тестов

Тесты проверяют корректность работы математических функций. Чтобы убедиться, что всё работает как надо (особенно после внесения изменений), запустите тесты.

Для этого вам понадобится `pytest`. Сначала установите его:
```bash
pip install pytest
```
Затем запустите тесты из корневой папки проекта:
```bash
pytest
```
Вы увидите отчёт о том, какие тесты прошли успешно, а какие — нет.
